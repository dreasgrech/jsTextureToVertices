<html>

	<head>
	</head>

	<body>
		<canvas id="myDrawing" width="200" height="200" tabindex="2">
		<p>
		Your browser doesn't support canvas.
		</p>
		</canvas>
		<script src="t2v/mouse.js"></script>
		<script src="t2v/rectangle.js"></script>
		<script src="t2v/marker.js"></script>
		<script src="t2v/library.js"></script>
		<script>
			var imageFilename = "images/block.png";
			var drawingCanvas = document.getElementById('myDrawing');

			if (drawingCanvas.getContext) {
				// Initaliase a 2-dimensional drawing context
				var context = drawingCanvas.getContext('2d');
				//Canvas commands go here
				t2v(drawingCanvas, context, imageFilename, function (library) {
					drawingCanvas.addEventListener("click", function(e) {
						var position = {
							x: e.clientX - drawingCanvas.offsetLeft,
							y: e.clientY - drawingCanvas.offsetTop
						};
						console.log('Adding marker to: (' + position.x + ', ' + position.y + ')');
						library.addMarker(position);
						//console.log(library.getVertices());

					}, false);

					drawingCanvas.addEventListener("mousewheel", function(e) {
						alert('s');
					},false);

					var mouseInput = mouse();
					mouseInput.move(function (pos) {
						//console.log(pos);

					});
					mouseInput.drag(function (pos) {
						var marker = library.getMarkerAt(pos);
						if (marker) {
							console.log('Moving to position');
							//marker.moveTo(pos);
				       		}
					});

				});




			}
		</script>
	</body>

</html>
